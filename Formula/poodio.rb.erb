# typed: strict
# frozen_string_literal: true

# Formula '<%= name %>', version '<%= version %>', created at '<%= Time.now.utc.strftime("%FT%TZ") %>'
class <%= name.split(/-|_/).map(&:capitalize)*'' %> < Formula
  desc "<%= description %>"
  homepage "<%= homepage %>"
  license "<%= license %>"
  on_arm do
    on_macos do
      url "<%= repository %>/releases/download/<%= tag %>/<%= tag %>-aarch64-apple-darwin.tgz"
      sha256 "<%= sha256_aarch64_apple_darwin %>"
    end
    on_linux do
      url "<%= repository %>/releases/download/<%= tag %>/<%= tag %>-aarch64-unknown-linux-gnu.tgz"
      sha256 "<%= sha256_aarch64_unknown_linux_gnu %>"
    end
  end
  on_intel do
    on_macos do
      url "<%= repository %>/releases/download/<%= tag %>/<%= tag %>-x86_64-apple-darwin.tgz"
      sha256 "<%= sha256_x86_64_apple_darwin %>"
    end
    on_linux do
      url "<%= repository %>/releases/download/<%= tag %>/<%= tag %>-x86_64-unknown-linux-gnu.tgz"
      sha256 "<%= sha256_x86_64_unknown_linux_gnu %>"
    end
  end
  def install
    bin.install "<%= name %>"
  end
  test do
    assert_equal "<%= version %>\n", shell_output("'#{bin}/<%= name %>' --version")
  end
end
